<!DOCTYPE html>

<html>

	<head>
		<title></title>
		<link rel="stylesheet" type="text/css" href="civstyle.css" />
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<meta charset="UTF-8"> 
		<script>
var blankPerson = ["None", 0, "they", -1, "None"];
var council = [blankPerson, blankPerson, blankPerson];
var leader;

function init()
{
	leader = getPerson();
	leader[3] = 50;
	leader = setQualities(leader);

	updateTables();

	//Populates initial council
	for (var i = 0; i < 3; i++)
	{
		council[i] = getPerson();
		alert(council[i][0] + " has joined your council.");
		updateTables();
	}
}

function getName()
{
	var nameSyls = ["mi", "cha", "el", "ma", "the", "ew", "jo", "shu", "a", "ni", "cho", "las", "ty", "ler", "bra", "don", "au", "stin", "da", "niel", "an", "nie", "lo", "la", "el", "iz", "ab", "eth", "em", "mil", "ly", "cal", "eb", "har", "ris", "son"];
	var name = "";

	nameAlength = Math.floor(Math.random() * 1) + 2;
	nameBlength = Math.floor(Math.random() * 3) + 2;
	
	//Randomly generates from the syllables
	var syl = nameSyls[Math.floor(Math.random() * nameSyls.length)];
	name += syl.charAt(0).toUpperCase() + syl.slice(1);
	for (var i = 1; i < nameAlength; i++)
	{
		if (Math.floor(Math.random() * 15) == 14)
			name += "'";
	
		name += nameSyls[Math.floor(Math.random() * nameSyls.length)];
	}

	name += " ";

	syl = nameSyls[Math.floor(Math.random() * nameSyls.length)];
	name += syl.charAt(0).toUpperCase() + syl.slice(1);
	for (var p = 1; p < nameBlength; p++)
	{
		if (Math.floor(Math.random() * 15) == 14)
			name += "'";

		name += nameSyls[Math.floor(Math.random() * nameSyls.length)];
	}

	return name;
}

function getPerson()
{
	/*
	   A person is an array in this game.  The indexes for a person's stats are as follows:
	   0 - name
	   1 - age
	   2 - gender pronouns
	   3 - politic index ... high = conservative, low = liberal
	   4 - remarkable qualities
	 */

	var genderPronouns = ["she", "he", "they"];

	var person = [getName(), Math.floor(Math.random() * 60) + 4, genderPronouns[Math.floor(Math.random() * 3)], Math.floor(Math.random() * 101), ""];
	
	person = setQualities(person);

	return person;
}

function setQualities(person)
{
	person[4] = "";

	if (person[1] <= 14)
		person[4] += "prodigy";
	
	if (person[3] < 5 || person[3] > 95)
	{
		if (person[4] != "")
			person[4] += ", ";

		person[4] += "political extremist";
	}

	if (person[4] != "")
		person[4] = person[4].charAt(0).toUpperCase() + person[4].slice(1);
	else
		person[4] = "None";
	
	return person;

}

function updateTables()
{
	updateCouncilTable();
	updateLeaderTable();
}

function updateCouncilTable()
{
	var myTable = document.getElementById('council_table');

	for (var i = 0; i < 3; i++)
	{
		myTable.rows[i+1].cells[0].innerHTML = council[i][0];
		myTable.rows[i+1].cells[1].innerHTML = council[i][1];
		myTable.rows[i+1].cells[3].innerHTML = council[i][4];	
		var polAlignment = council[i][3];

		if (polAlignment == -1)
			polAlignment = "NA";
		else if (polAlignment < 33)
			polAlignment = "Liberal";
		else if (polAlignment < 66)
			polAlignment = "Moderate";
		else
			polAlignment = "Conservative";

		
		myTable.rows[i+1].cells[2].innerHTML = polAlignment;
	}
}

function updateLeaderTable()
{
	var myTable = document.getElementById('leader_table');

	myTable.rows[1].cells[0].innerHTML = leader[0];
	myTable.rows[1].cells[1].innerHTML = leader[1];
	myTable.rows[1].cells[3].innerHTML = leader[4];
	
	var polAlignment = leader[3];

	if (polAlignment < 33)
		polAlignment = "Liberal";
	else if (polAlignment < 66)
		polAlignment = "Moderate";
	else
		polAlignment = "Conservative";

	myTable.rows[1].cells[2].innerHTML = polAlignment;
}

		</script>
	</head>
	
	<body onload="init()">
		<h2>Your Stats:</h2><br>
		<table id="leader_table">
			<tr>
				<th>Ruler Name:</th>
				<th>Age:</th>
				<th>Political Alignment:</th>
				<th>Remarkable Qualities:</th>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
		</table>
		<br>
		<h2>Your Council</h2><br>
		<table id="council_table">
			<tr>
				<th>Council Member:</th>
				<th>Age:</th>
				<th>Political Alignment:</th>
				<th>Remarkable Qualities:</th>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
		</table>
		<div id="notifications"></div>
	</body>
</html>
